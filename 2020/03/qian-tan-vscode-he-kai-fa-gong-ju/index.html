<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="浅谈 VSCode 和开发工具, Palm Civet,Blog">
    <meta name="description" content="一个全沾开发者">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>浅谈 VSCode 和开发工具 | Palm Civet</title>
    <link rel="icon" type="image/png" href="/meta/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Palm Civet" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/meta/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Palm Civet</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>时间轴</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友链</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/meta/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Palm Civet</div>
        <div class="logo-desc">
            
            一个全沾开发者
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			时间轴
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友链
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://s1.ax1x.com/2020/07/13/UGtZQI.png')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">浅谈 VSCode 和开发工具</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E5%8F%82%E8%80%83/">
                                <span class="chip bg-color">参考</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Geek/" class="post-category">
                                Geek
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布于:&nbsp;&nbsp;
                    2020-03-06
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新于:&nbsp;&nbsp;
                    2020-03-06
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    7.9k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    28 分
                </div>
                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>早在今年二月份，我产生了一个自建云开发环境的想法，就是复刻微软的 Visual Studio Online，<s>（因为这一服务需要 Azure，而 Azure 要钱），</s> 然后在 iPad 上就可以码代码了，日常通勤只需携带 iPad。</p>
<p>地毯式搜索之后，发现解决方案还是不少的，<a target="_blank" rel="noopener" href="https://github.com/cdr/code-server" title="GitHub"><em>Code Server</em></a> 就是其中一个，其本质就是魔改 VSCode。你也可以更极客（硬核）一点，VSCode 官方提供了 <a target="_blank" rel="noopener" href="https://github.com/microsoft/vscode/wiki/How-to-Contribute" title="GitHub Wiki">编译步骤</a>，可以编译为 Web 应用，部署在自己的服务器上，成为比 <em>Code Server</em> 更原生的云编辑器。</p>
<p><img src="https://github.com/cdr/code-server/raw/main/docs/assets/screenshot.png" alt="Code Server - 图片来自官方 GitHub" /></p>
<p>除此之外，如 <a target="_blank" rel="noopener" href="https://stackblitz.com/" title="主页">StackBlitz</a> 等其他解决方案以及具体玩法见后文 <s>，后文的意思是今后的文章（逃</s></p>
<p>之后（五月），GitHub 又推出了 <a target="_blank" rel="noopener" href="https://github.com/features/codespaces" title="主页">Codespaces</a>，这么多项目<s>玩具</s>，谁是谁，关系又如何，完全搞不清楚，所以产生了一篇名为《非权威解读 Visual Studio “全家桶”》的文章草稿，只是开了个头，就搁置了。一是只介绍产品没什么深度，二是要学习新知识没精力<s>就是懒</s>，三是就这么点东西，关系厘清就好了，真没啥可写。再后来也就是现在（七月），应邀<s>硬要</s>介绍一下 VSCode 的基本玩法，并且讨论一些开发工具，作为入门<s>启蒙读物</s>还是有必要的，故而我就一瓶子不满半瓶子晃，厚着脸皮在此搬弄。</p>
<h2 id="开发工具"><a class="markdownIt-Anchor" href="#开发工具"></a> 开发工具</h2>
<p>大多数编程初学者用 C 语言入门，不少高校以及出版教材都使用 Visual C++ 6.0 作为开发工具进行演示，光这一点就被人诟病已久；另一方面，类似谭浩强版教材，或因写作历史久远缺乏更新，却因校方教材审校不当，或因作者只想完成任务，导致学习难度增加，提高了计算机专业的入门门槛（注意是对口的计算机专业，也就是说，消磨了热衷于学习的初学者的热情）。</p>
<p>我们盘点一下 C 教学经常用到的工具。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Microsoft%20Visual%20C%2B%2B/8646587" title="百度知道">Microsoft Visual C++</a>
<ul>
<li>也称 MSVC，是微软的 C++ 开发工具，具有可视化界面（Visual）</li>
<li>6.0 版本于 1998 年发行</li>
<li>后来的版本被集成在 Visual Studio 中，成为其中的一个组件</li>
<li>历史久远，存在较多错误和兼容性问题</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="http://programarts.com/" title="主页">C Free</a>
<ul>
<li>国产收费软件</li>
<li>最新版为 5.0，发布于 2010 年 7 月 19 日</li>
</ul>
</li>
<li>Dev C++
<ul>
<li>是一款开源的自由软件，集成了 MinGW 中的 GCC、GDB 等工具</li>
<li>原开发公司 <em>Bloodshed</em> 在开发完 <a target="_blank" rel="noopener" href="https://sourceforge.net/projects/dev-cpp/" title="原 SourceForge">4.9.9.2</a> 后停止开发，现在由 <em>Orwell</em> 公司继续开发更新，称为 <a target="_blank" rel="noopener" href="https://sourceforge.net/projects/orwelldevcpp/" title="新 SourceForge">orwelldevcpp</a></li>
<li>最新版为 5.12，发布于 2016 年 11 月 29 日</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="http://www.codeblocks.org/">Code::Blocks</a>
<ul>
<li>开源软件，跨平台（上述三款仅限 Windows 平台）</li>
<li>最新版为 20.03，发布于 2020 年 3 月 19 日</li>
</ul>
</li>
</ul>
<p>作为学习使用，比较推荐的是 Dev C++ 和 Code::Blocks。这些软件有一个共性：都是集成开发环境（简称 <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-hans/%E9%9B%86%E6%88%90%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83" title="Wiki">IDE</a>）。</p>
<h3 id="ide"><a class="markdownIt-Anchor" href="#ide"></a> IDE</h3>
<blockquote>
<p>集成开发环境（Integrated Development Environment，IDE），是用于提供程序开发环境的应用程序，一般包括代码 <em>编辑器</em>、<em>编译器</em>、<em>调试器</em> 和图形用户界面等工具。集成了代码编写功能、分析功能、编译功能、调试功能等一体化的开发软件服务套件。<br />
—— 百度百科</p>
</blockquote>
<p>很多教材和教师在 C/C++ 入门介绍的时候，简略或忽略预处理、编译、汇编、链接这一过程，而在 Java 入门的时候，会强调体验一下“使用记事本写一个 <code>.java</code> 文件，然后用 <code>javac</code> 命令编译为 <code>.class</code> 文件，再使用 <code>java</code> 命令运行”这个过程。</p>
<p><img src="http://aliyunzixunbucket.oss-cn-beijing.aliyuncs.com/jpg/67e5ff298100a5d491d1e610dab63905.jpg" alt="#b# C 编译过程 - 图片来自网络" /></p>
<p>实际上，编译型语言的运行都需要经过编译，转换成可执行文件方可运行。运行 Java 代码这一过程虽然不复杂，但开发时每次修改都要重复一遍，显然不人道。所以把这些重复动作交给脚本或者程序使其自动完成，程序员只需专注于代码本身，这样可以极大提高工作效率。</p>
<p>另一方面，程序出错之后需要找错误，使用各种 <em>调试</em>（debug）手段。什么？<code>print</code> 语句/函数？写 3 行代码可以，3 百行代码可以，但是 3 万行、3 千万行呢？手动添加调试代码的方式不仅缺乏交互性，还增加了工作量，需要在开发结束删除或者通过某种机制禁用（如 C 的 <code>DEBUG</code> 宏）。调试器就提供了这样的功能，能够在程序运行过程中实时监测变量的值，在代码中设立 <em>断点</em>（breakpoint）或 <em>观测点</em>（watchpoint），调试时动态显示这些值，再次提高工作效率。</p>
<p><img src="https://s1.ax1x.com/2020/07/13/UGtPoD.png" alt="#b# VSCode 调试 Python" /></p>
<p>再者，代码写完需要构建成一个可以用的软件/项目，需要执行打包、压缩、加壳、添加水印、颁发证书等等操作，这些流程同样需要自动化；开发过程中，代码不是一成不变的，而是需要经过无数次的改动，每次改动之间的联系和关系需要管理；作为一个团队，需要共享一些配置和代码/库 …… 这一切的一切，都需要一堆工具和一套科学的方法体系来管理控制，IDE 就是这样一个工具集合，依据某些开发理论组合而成。</p>
<h3 id="编译器"><a class="markdownIt-Anchor" href="#编译器"></a> 编译器</h3>
<blockquote>
<p>编译器（compiler）是一种计算机程序，它会将某种编程语言写成的源代码（原始语言）转换成另一种编程语言（目标语言）。<br />
主要的目的是将便于人编写、阅读、维护的高级计算机语言所写作的源代码程序，翻译为计算机能解读、运行的低阶机器语言的程序，也就是可执行文件<br />
—— 万维百科</p>
</blockquote>
<p>对于 C/C++，编译器将源代码转换成可执行文件，其本质就是计算机指令的二进制表示，可以直接在操作系统上运行；对 Java，编译器将源代码转换成 Java 虚拟机（JVM）能运行的二进制指令。</p>
<p><em>编译原理</em> 是计算机专业的一门重要专业课，旨在介绍编译程序构造的一般原理和基本方法。内容包括语言和文法、词法分析、语法分析、语法制导翻译、中间代码生成、存储管理、代码优化和目标代码生成。编译原理是轮子哥（<a target="_blank" rel="noopener" href="https://www.zhihu.com/people/excited-vczh" title="知乎个人主页">vczh</a>）所说的“计算机中的「三大浪漫」”，另两个是操作系统和图形学。</p>
<h4 id="静态和动态"><a class="markdownIt-Anchor" href="#静态和动态"></a> 静态和动态</h4>
<p>通常，静态类型的语言在 <strong>编译期间</strong> 检查数据类型，使用前必须声明数据类型，如 C/C++、C#、Java、Rust，通常需要编译。</p>
<p>而动态类型的语言通常不需要编译，<strong>运行期间</strong> 才做数据类型检查，源代码由 <em>解释器</em>（interpreter） 解释执行，因此叫 <em>解释型</em> 语言（相对于 <em>编译型</em>），如 JavaScript、Python、PHP，该类型的语言会在第一次赋值给变量时，在内部将数据类型记录下来。</p>
<h4 id="jit-和-aot"><a class="markdownIt-Anchor" href="#jit-和-aot"></a> JIT 和 AOT</h4>
<p>但实际上，JavaScript 是有编译过程的，但这又与传统的编译不同，不是提前编译整份文件，而是大部分情况在代码执行前编译，甚至是代码执行时编译（JIT，Just In Time），称为 <em>及时编译</em>。一个比较显著的现象就是变量/函数 <em>提升</em>（hoist）。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>正如上述 JS 代码，可以先赋值，再声明。如果一行一行解释执行的话，则无法预知在下方的声明。</p>
<p>相比于「编写-编译-执行」这一过程，运行时编译可以加快从编码到执行的时间，JVM 在运行时也用到了 JIT 技术。与 JIT 相对的就是 AOT（Ahead Of Time），运行前编译，比如普通的静态编译。</p>
<p>实际上，种种技术都是 <strong>速度</strong> 和 <strong>质量</strong> 博弈的结果，静态类型保证数据的可靠性，加快了执行速度，但降低了开发效率，动态类型提高了开发效率，但免不了数据出现错误，JIT 技术可以说是一个折中，但又会消耗运行时（runtime）资源。为了压榨性能，新兴的现代编程语言是多种技术的集合，是不能简单用几个标签就能归类的。</p>
<p>编程语言是以一种 <strong>规范</strong>，具有语法特性，每种语言都有各自对应的编译器/解释器，每款编译器/解释器的具体实现不一。对于 C/C++，VS 使用 MSVC，Linux 使用 <code>gcc</code>/<code>g++</code>，XCode 使用 <code>clang</code>/<code>clang++</code>；对于 Python，有使用 C 开发的解释器 <em>CPython</em>（最流行，<a target="_blank" rel="noopener" href="https://www.python.org/">官网</a> 默认即为 CPython），有使用 Java 开发的 <em>JPython</em>，有使用 Python 开发的 <em>PyPy</em>。各种语言的实现都可以有，但每种编译器/解释器的实现方式和优化不尽相同，质量有高有低。</p>
<p>用 Python 开发 Python 的解释器，编程语言的这种行为称为 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Bootstrapping_(compilers)" title="Wiki"><em>自举</em></a>（bootstrap）。通常来说，一门新的编译型语言（假设为 NL）的编译器会使用其他语言（比如 C、C++、汇编）来开发，然后使用得到的编译器（如 CNL）编译编译器的源码，再逐步完善（得到使用 NL 开发的编译器 NLNL）。</p>
<p>既然提到了编译器，就不得不说 GCC 和 LLVM 了。</p>
<h4 id="gcc"><a class="markdownIt-Anchor" href="#gcc"></a> GCC</h4>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://gcc.gnu.org/">GNU</a>，GNU Compiler Collection，GNU 编译器套件。</p>
</blockquote>
<p>GCC 原为 <em>GNU C Compiler</em>，只能处理 C 语言。但其很快扩展，变得可处理 C++，后来又扩展为能够支持更多编程语言，如 Fortran、Pascal、Objective-C、Java、Ada、Go 以及各类处理器架构上的汇编语言等，所以改名 <em>GNU Compiler Collection</em>。</p>
<p>GCC 套件包括但不限以下工具：</p>
<ul>
<li><code>gcc</code>：运行该工具等同于执行编译链接生成等一系列过程</li>
<li><code>g++</code>：类似 gcc，默认语言设置为 C++</li>
<li><code>ld</code>：链接器</li>
<li><code>as</code>：GNU 汇编器，实际上是一族汇编器，可以编译为能在各个平台上工作</li>
<li><code>gdb</code>：GNU 调试器，一款强大的调试器</li>
<li><code>nm</code>：列出目标文件中定义的符号</li>
<li><code>make</code>：执行脚本的工具，C/C++ 开发时，通常使用 Makefile 编写好文件之间的依赖和关系，然后使用 <code>make</code> 执行时，将按照 Makefile 定义的顺序编译链接生成</li>
<li><code>objdump</code>：显示目标文件中保存的多种不同信息</li>
</ul>
<p>除此之外还有一系列库。</p>
<p>GCC 是一套组件的 <strong>集合</strong>（在此用大写标识），而 <code>gcc</code> 和 <code>g++</code> 实际上是 <strong>驱动器</strong>，根据文件特征或者参数调用相关工具和库，最终生成目标文件。详细区别可见 <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/20940822">gcc和g++是什么关系？ - 知乎</a>。</p>
<h4 id="llvm"><a class="markdownIt-Anchor" href="#llvm"></a> LLVM</h4>
<blockquote>
<p>The LLVM Project is a collection of modular and reusable compiler and toolchain technologies. Despite its name, LLVM has little to do with traditional virtual machines. The name “LLVM” itself is not an acronym; it is the full name of the project.<br />
—— <a target="_blank" rel="noopener" href="http://llvm.org/" title="主页">The LLVM Compiler Infrastructure</a></p>
</blockquote>
<p>LLVM 的命名最早来源于底层语言虚拟机（Low Level Virtual Machine）的缩写。它是一个用于建立编译器的基础框架，最初是伊利诺伊大学（<em>University of Illinois</em>）的一个研究项目，目标是提供一种现代的、基于 SSA 的编译策略，能够同时支持任意编程语言的静态和动态编译。自那时以来，LLVM 已经成为一个由若干子项目组成的总括项目，包括但不限于：</p>
<ul>
<li>LLVM Core：LLVM 核心库提供一个与源和目标无关的现代优化器，以及对许多流行 CPU 的代码生成支持，核心库是围绕 <em>LLVM IR</em>（LLVM 中间表示）构建的。</li>
<li>Clang：LLVM 原生的 C/C++/Objective-C 编译器</li>
<li>LLDB：建立在 LLVM 和 Clang 提供的库之上，提供一个优秀的调试器</li>
<li>LLD：一个新的链接器，取代系统链接器，运行速度更快</li>
<li><code>libc++</code> 和 <code>libc++ ABI</code>：提供了一个标准的、符合规范的、高性能的 C++ 标准库实现</li>
</ul>
<p>LLVM 跟 GCC 不是对应关系，后者是一个组件，而前者是一个编译器框架，一个最明显的体现在于 LLVM IR。不同于机器码，这是一种更低层（更接近机器），但尚未完全暴露出具体平台相关的特征的代码表示，因此具有通用性和可移植性。</p>
<p>各种各样的应用（DSL、GPU 数据库、TVM、安全、区块链等）<br />
=&gt; 生成 LLVM IR<br />
=&gt; 编写针对自己特定应用的优化<br />
=&gt; LLVM 的优化<br />
=&gt; LLVM 代码生成<br />
=&gt; 目标代码（ARM、x86、Hexagon、NVPTX、AMDGPU、WebAssembly、定制的芯片等）</p>
<p>LLVM 是一个后端，C 和 Python 都可以编译成 LLVM IR，然后再进一步处理。这种模块化的组成降低了设计一款编程语言的难度。因此 LLVM 与底层虚拟机已风马牛不相及，只是一个名称而已。各种语言如 Go、Rust、Swift 都有基于 LLVM 的编译器前端。</p>
<h3 id="编辑器"><a class="markdownIt-Anchor" href="#编辑器"></a> 编辑器</h3>
<p>说完编译器（compiler），再谈一谈编辑器（editor）。编辑器就是写代码的工具，本质就是文本编辑器。文本编辑器是计算机软件中的一种，主要用于用来编写和查看文本文件。<em>Microsoft Word</em> 是文本编辑器吗？不是，它编辑和保存的文件是二进制文件，文本文件应由字符（可打印和不可打印）组成。下面列举一些文本编辑器。</p>
<h4 id="notepad"><a class="markdownIt-Anchor" href="#notepad"></a> Notepad</h4>
<p>Notepad 就是 Windows 系统 <code>C:\windows\system32\</code> 下的 <code>notepad.exe</code>，中文名为 <em>记事本</em>。代码的本质就是文本文件，使用它书写足矣。</p>
<p><img src="https://s1.ax1x.com/2020/07/13/UGtSL6.jpg" alt="#b# 近 60 位鹅厂程序员对 Python 开发工具的偏好 - 原图来自网络" /></p>
<p>可是，为什么真正使用记事本的人少之又少呢？</p>
<p>表述开发、编程、代码等关键词时以及在公众号博客等文章的封面，我们能经常看到类似这样的图片：</p>
<p><img src="https://goss1.veer.com/creative/vcg/veer/612/veer-143481084.jpg" alt="#b# 图片来自网络" /></p>
<p><img src="http://pics.sc.chinaz.com/files/pic/pic9/201811/zzpic15036.jpg" alt="#b# 图片来自网络" /></p>
<p>最直接的感受就是深色背景下花花绿绿的字体，这种将代码着以不同色彩的行为叫做 <em>高亮</em>（highlight）。代码是有规律可循的，相同的语法结构应该高亮出来，方便辨认，这就是记事本等普通编辑器无法做到的，但又是代码编辑器需要完成的目标之一。不同的人有不同的喜好，因此产生了各种配色，大多数代码编辑器支持自定义配色，用户可以选择第三方调校好的主题或者自行搭配。</p>
<p>在此分享两个网站：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://vscodethemes.com/">VSCodeThemes</a>：VSCode 主题市场，可自由选择</li>
<li><a target="_blank" rel="noopener" href="https://tmtheme-editor.herokuapp.com/">TmThemeEditor</a>：自定义 Sublime Text 3 主题，其中也内置了著名主题，用户可以在此基础上修改</li>
</ul>
<p>此外还要搭配合适的编程字体（宋体实在太没辨识度了，<code>0O1il</code> 不分）。以下为 <em>异次元软件世界</em> 介绍的几款编程字体</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.iplaysoft.com/jetbrains-mono.html" title="文章页">JetBranson Mono</a><br />
<img src="https://img.iplaysoft.com/wp-content/uploads/2020/jetbrains-mono/jetbrains_mono_banner.png!0x0.webp" alt="#b# 文章封面" /></li>
<li><a target="_blank" rel="noopener" href="https://www.iplaysoft.com/cascadia-code.html" title="文章页">Cascaia Code</a><br />
<img src="https://img.iplaysoft.com/wp-content/uploads/2019/cascadia-code/cascadia_banner.jpg!0x0.webp" alt="#b# 文章封面" /></li>
<li><a target="_blank" rel="noopener" href="https://www.iplaysoft.com/mononoki.html" title="文章页">Mononoki</a><br />
<img src="https://img.iplaysoft.com/wp-content/uploads/2016/mononoki/mononoki_banner.jpg!0x0.webp" alt="#b# 文章封面" /></li>
<li><a target="_blank" rel="noopener" href="https://www.iplaysoft.com/programming-fonts-collection.html" title="文章页">其他推荐字体合集</a></li>
</ul>
<p>一个成熟的代码编辑器需要完成的目标还有 <strong>语法检测</strong>、<strong>风格检测</strong>、<strong>格式化</strong>、<strong>语法提示</strong> 和 <strong>自动补全</strong> 等。开发者们矢志不渝，致力于打造方便快捷高效的工具，帮助开发者们提升开发体验（DX，Develop eXperience）。</p>
<p><img src="https://s1.ax1x.com/2020/07/13/UGYxQ1.png" alt="#b# 代码提示和语法检测，按回车可补全" /></p>
<p>目前使用比较多的编辑器非 Vim/Emacs 和 VSCode 莫属，下面简单谈谈。</p>
<h4 id="sublime-text"><a class="markdownIt-Anchor" href="#sublime-text"></a> Sublime Text</h4>
<blockquote>
<p>用“最性感的编辑器”书写崇高的文本</p>
</blockquote>
<p><img src="https://img.iplaysoft.com/wp-content/uploads/2012/Sublime-Text-2---_D09E/sublimetext.jpg!0x0.webp" alt="#b# 异次元软件世界介绍 ST 时的封面" /></p>
<p><a target="_blank" rel="noopener" href="http://www.sublimetext.com/" title="主页">Sublime Text</a> 是闭源收费软件，但可以免费无限期试用（全功能），但某个时间段使用频率较高时会弹窗提示购买。<s>这才是良心软件，免费给予使用权，收费给予所有权。</s></p>
<p><img src="https://a.axihe.com//img/tools/sublimetext/2015-09-05_55ea6f675e6c4.jpg" alt="#b# Sublime Text 提示购买 - 图片来自网络" /></p>
<p>目前最新版本为 <code>3.x</code>。ST 很难开箱即用，需要进行一些基本配置，如果要求较高，还得深度定制。现代编辑器包括下面提到的几个都拥有插件机制，得益于 Package Control，使用命令面板即可安装插件，也可到 <a target="_blank" rel="noopener" href="https://packagecontrol.io/" title="Package Control 插件市场主页">插件市场</a> 挑选。</p>
<p><img src="https://s1.ax1x.com/2020/07/13/UGtCdO.png" alt="#b# Sublime Text 的插件市场" /></p>
<h4 id="vs-code-和-atom"><a class="markdownIt-Anchor" href="#vs-code-和-atom"></a> VS Code 和 Atom</h4>
<p>Atom 是 GitHub 的一个开源项目，五六年前较为盛行，使用 Electron 技术栈打造，相当于把浏览器搬到桌面，Web 前端技术栈发挥空间较大，但随之而来的就是体积臃肿和运行卡慢。</p>
<p>2015 年，微软发布并开源了 <a target="_blank" rel="noopener" href="https://code.visualstudio.com/" title="主页">Visual Studio Code</a>，一款轻量级的代码编辑器，同样基于 Electron。作为 Atom 的后继者，由微软牵头打造，经过多年努力，性能和功能非 Atom 所能及。</p>
<p><img src="https://picb.zhimg.com/v2-847a0fe866f6afb66af967aedaa5d3cb_r.jpg" alt="#b# VS 的安装大小 - 来自知乎专栏，作者见水印" /></p>
<p>我们在谈到编辑器的时候总会说「轻量级」这个词，而 IDE 总会说重量级，原因前文已经说过，编辑器只不过是 IDE 中的一个组件。虽然 VSCode 只是个编辑器，但搭配上插件，匹敌 IDE 不是难事，无论功能上还是体量上。</p>
<p><img src="https://s1.ax1x.com/2020/07/13/UGtFFe.png" alt="#b# VSC 和 ST3 体积对比，macOS 平台日常使用，数据仅供参考" /></p>
<p>同时打开速度上，ST 可以实现瞬开，但 VSCode 只能实现秒开，但比 IDE 快多了。我通常使用 ST 更改配置文件、临时查看代码，使用 VSCode 作为开发环境。</p>
<p>成也 Electron，败也 Electron，使用该框架，即使没有功能，打包后体积也需 100MiB 起步，但巨硬拥有全球顶尖的团队，不断压榨性能的同时，还在拓宽功能，形成了一个繁荣的生态系统，拥有庞大的插件市场。更多信息和玩法见 <a href="#vs-code">VSCode</a> 一节。</p>
<h4 id="其他编辑器"><a class="markdownIt-Anchor" href="#其他编辑器"></a> 其他编辑器</h4>
<p>文本编辑器千千万，在 Atom 和 VSCode 之前和之后，都涌现大量工具，其中不乏优秀作品。下面列举一部分。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.editplus.com/">EditPlus</a>
<ul>
<li>30 天免费试用</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://notepad-plus-plus.org/">Notepad++</a>
<ul>
<li>这两个都是 XP 时代的 UI 风格</li>
<li>免费使用</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://www.notepadsapp.com/">Notepads</a><br />
<img src="https://static.wixstatic.com/media/0fcd80_f13c96da960d491fa8862087ad614ce4~mv2.png/v1/fill/w_972,h_745,al_c,q_90,usm_0.66_1.00_0.01/1.webp" alt="Notepads App - 图片来自官网" />
<ul>
<li>Fluent Design 现代化 UI</li>
<li>Windows UWP</li>
<li>开源在 <a target="_blank" rel="noopener" href="https://github.com/JasonStein/Notepads" title="GitHub 仓库">GitHub</a>，可在 <a target="_blank" rel="noopener" href="https://www.microsoft.com/zh-cn/p/notepads-app/9nhl4nsc67wm" title="Microsoft Store">微软商店</a> 下载</li>
</ul>
</li>
</ul>
<h4 id="请出-vim"><a class="markdownIt-Anchor" href="#请出-vim"></a> 请出 Vim</h4>
<blockquote>
<p>Vi IMproved</p>
</blockquote>
<p>Vim 压轴并不为过，这款诞生于上个世纪的编辑器，是 Linux 下的文本编辑器，是 Vi 命令的加强版，支持各大平台架构。</p>
<ul>
<li><em>gVim</em> 是 Vim 的图形化前端。跨平台</li>
<li><em>NeoVim</em> 是 Vim 的衍生，与 Vim 存在竞争关系</li>
</ul>
<p>关于 Vim，最著名的段子就是「如何退出」，这与其独特的编辑模式密不可分：</p>
<ul>
<li>Normal：普通模式，<kbd>Esc</kbd> 进入</li>
<li>Insert：插入模式，<kbd>I</kbd> 进入</li>
<li>Visual：可视模式，<kbd>V</kbd> 进入</li>
<li>Replace：替换模式，<kbd>R</kbd> 进入</li>
<li>命令行模式，<kbd>:</kbd> 进入</li>
</ul>
<p>退出使用命令模式：</p>
<ul>
<li><code>q</code> 退出</li>
<li><code>wq</code> 写入（保存）</li>
<li><code>q!</code> 不写入退出</li>
</ul>
<p>使用 <code>vim</code> 命令进入将得到一个黑色的窗口，很难想象这就是一个有力的开发工具。诚然，不经配置的工具，和记事本并无区别。得益于 VimScript 和 <a target="_blank" rel="noopener" href="https://vimawesome.com/" title="插件市场">插件系统</a>，可玩性大大增强，VimScript 是一门基于 Vim 的语言，因此可以通过 Vim 和 Shell 命令操纵任何事物。<s>只有你想不到的，没有我 Vim 做不到的（逃</s></p>
<p>Vim 最新版本为 <code>8.x</code>，支持异步 API 和浮动窗口，这个古老的生产力工具同样具有很多新特性，分享一张我配置的 Vim 截图，主题为 <em>gruvbox</em>。</p>
<p><img src="https://s1.ax1x.com/2020/07/13/UGtkJH.png" alt="#b# Vim 开发界面" /></p>
<h4 id="emacs-不服"><a class="markdownIt-Anchor" href="#emacs-不服"></a> Emacs 不服</h4>
<p>Emacs 跟 Vim 一样，也是元老级，足够强大，但我没有使用过，不好在此评判。<s>虽然没有用过，但必须拥有姓名（逃</s></p>
<h3 id="再谈-ide"><a class="markdownIt-Anchor" href="#再谈-ide"></a> 再谈 IDE</h3>
<p><s>关于 IDE 还没完，大 VS 和 JB 家族必须拉出来吹一下。</s></p>
<p>前面 <a href="#%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7">开发工具</a> 一节提到，Visual Studio C++ 已被 <a target="_blank" rel="noopener" href="https://visualstudio.microsoft.com/zh-hans/" title="主页">Visual Studio</a> 集成，不止是 C++，还有 Visual Studio Python、Visual Studio C# 等一系列组件，动辄十几 G，实际上客户端开发的 IDE，如 XCode 和 Android Studio，都需要大量依赖和库，体量是不会小的。</p>
<h4 id="jetbrains-必须拥有姓名"><a class="markdownIt-Anchor" href="#jetbrains-必须拥有姓名"></a> JetBrains 必须拥有姓名</h4>
<p><a target="_blank" rel="noopener" href="https://www.jetbrains.com/" title="主页">JetBrains</a> 是一家很酷的公司，开发了一系列优质的 IDE，最出名的莫过于 <a target="_blank" rel="noopener" href="https://www.jetbrains.com/idea/" title="IntelliJ IDEA主页">IntelliJ IDEA</a> 和 <a target="_blank" rel="noopener" href="https://www.jetbrains.com/pycharm/" title="PyCharm 主页">PyCharm</a>。此外 <a target="_blank" rel="noopener" href="https://kotlinlang.org/" title="主页">Kotlin</a> 语言也是 JB 家的。</p>
<p><img src="https://s1.ax1x.com/2020/07/13/UGYzsx.png" alt="#b# JetBrains 主页" /></p>
<p>产品虽好用，但是收费，不过 IDEA 和 PyCharm 有可以免费使用的社区版；作为学生或教师，可免费使用所有产品；作为开发者，同样可以申请认证，从而免费使用所有产品。</p>
<h4 id="过气网红-eclipse"><a class="markdownIt-Anchor" href="#过气网红-eclipse"></a> <s>过气网红</s> Eclipse</h4>
<p>提到 Java 开发，<a target="_blank" rel="noopener" href="https://projects.eclipse.org/projects/eclipse.platform" title="主页">Eclipse Platform</a> 拥有一席之地，该开源项目隶属于 <a target="_blank" rel="noopener" href="https://www.eclipse.org/" title="主页">Eclipse 基金会</a>。Eclipse 是一个可扩展开发平台（platform），本身只是一个框架，通过插件来构建开发环境，所以可执行文件只有几 MiB。Eclipse 包括一个插件开发环境（Plug-in Development Environment，注意这个词，不是说开发插件的环境，而是环境由插件组成，环境是 <code>plug-in</code> 的。<s>原来英文也会有这个时候╮(╯▽╰)╭</s>）。官方提供了一个标准插件集，其中就包含 Java 开发包（<a target="_blank" rel="noopener" href="https://projects.eclipse.org/projects/eclipse.jdt">Eclipse Java development tools(JDT)</a>），当然也有 C/C++（<a target="_blank" rel="noopener" href="https://projects.eclipse.org/projects/tools.cdt">Eclipse C/C++ Development Tooling(CDT)</a>）等开发包。</p>
<p>因为这个项目是用 Java 开发的，所以……卡慢。<s>比 IDEA 还慢（IDEA 也是 Java 写的）。</s></p>
<h2 id="vs-全家桶"><a class="markdownIt-Anchor" href="#vs-全家桶"></a> VS 全家桶</h2>
<blockquote>
<p>“全家桶”这个称呼是我冠上的，实际上称为系列更合理。</p>
</blockquote>
<p><s>下面才是原本的文章</s></p>
<p><img src="https://s1.ax1x.com/2020/07/13/UGtVSA.png" alt="#b# VS 主页" /></p>
<h3 id="visual-studio"><a class="markdownIt-Anchor" href="#visual-studio"></a> Visual Studio</h3>
<p>众所周知，VS 是 Windows 上宇宙第一 IDE，不多说。</p>
<p><img src="https://s1.ax1x.com/2020/07/13/UGtZQI.png" alt="#b# Visual Studio Code 主页" /></p>
<h3 id="visual-studio-online"><a class="markdownIt-Anchor" href="#visual-studio-online"></a> Visual Studio Online</h3>
<p>北京时间 2019 年 11 月 4 日，在 Microsoft Ignite 2019 大会上，微软正式发布了 Visual Studio Online 公开预览版。</p>
<p>简单来说，VS Online 由两部分组成：</p>
<ul>
<li>前端：VS Code、VS 和 Web 版 VS Code（也就是 VS Online 提供的前端界面）</li>
<li>后端：由云服务支撑的开发环境，由 <a target="_blank" rel="noopener" href="https://www.azure.cn/" title="主页">Azure</a> 提供有力支持</li>
</ul>
<p>本质上说，是一种 SaaS 服务，其实就是后端建立标准化的的开发环境，前端通过某些形式（PC 端软件、移动端软件、Web 页面）接入。</p>
<p>- 懂了吗？<br />
- 懂了！<br />
- 好！改名部上。</p>
<h3 id="visual-studio-codespaces"><a class="markdownIt-Anchor" href="#visual-studio-codespaces"></a> Visual Studio Codespaces</h3>
<p><img src="https://s1.ax1x.com/2020/07/13/UGtAWd.png" alt="#b# Visual Studio Codespaces" /></p>
<p>正如你所见，Visual Studio Online 现在称为 <a target="_blank" rel="noopener" href="https://visualstudio.microsoft.com/zh-hans/services/visual-studio-codespaces/"><em>Visual Studio Codespaces</em></a> 啦。</p>
<p>了解了产品的本质，现在来说一说替代品。</p>
<ul>
<li>腾讯云的 <a target="_blank" rel="noopener" href="https://coding.net/products/cloudstudio" title="主页">Cloud Studio</a><br />
<img src="https://s1.ax1x.com/2020/07/13/UGt9eK.png" alt="#b# Cloud Studio 的特性" />
<ul>
<li>是腾讯云旗下 Coding 的产品，Coding 本身就兼具代码托管、集成测试、CI/CD 等功能，将代码编辑上云，方便开发也不足为奇，使开发成为闭环</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://stackblitz.com/" title="主页">StackBlitz</a><br />
<img src="https://s1.ax1x.com/2020/07/13/UGtdTU.png" alt="#b# StackBlitz 的 Web 界面" />
<ul>
<li>在浏览器编写代码并实时预览，可连接到 GitHub 仓库</li>
<li>目前仅限前端技术栈</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/cdr/code-server" title="GitHub">Code Server</a>
<ul>
<li>部署好后直接使用地址访问即可，相当于自建的 StackBlitz</li>
</ul>
</li>
</ul>
<p>这些产品都具有一个特点，都是基于 Web 前端，在网页中写代码，打开浏览器即可。大多数都用了 Monaco Editor 这个基于网页的编辑器（见 <a href="#vs-code">VS Code</a> 一节）。</p>
<h3 id="visual-studio-code"><a class="markdownIt-Anchor" href="#visual-studio-code"></a> Visual Studio Code</h3>
<p>跟 VS 不同，VSCode 是轻量级的编辑器，千文介绍过了，后文将进一步讨论。</p>
<h3 id="visual-studio-code-remote"><a class="markdownIt-Anchor" href="#visual-studio-code-remote"></a> Visual Studio Code Remote</h3>
<p>Visual Studio Code Remote 是一系列 VSCode 的 <strong>插件</strong>，允许开发者将容器（container），远程计算机，或 Windows Subsystem for Linux (WSL) 作为完整的开发环境，插件分别如下：</p>
<ul>
<li><code>Remote - SSH</code>：通过 SSH 连接到远程计算机或者虚拟机，选择一个文件夹作为工作目录</li>
<li><code>Remote - Containers</code>：把 Docker 作为开发容器</li>
<li><code>Remote - WSL</code>：在 Windows Subsystem for Linux 中，获得 Linux 般的开发体验</li>
</ul>
<p>搜索 「Remote」 关键词时会出现 <code>Remote Development extension pack</code>，这是一个插件包，包含以上三个插件，一键下载即可全部安装。<s>第一次装的时候没看清，有点蒙圈。</s></p>
<h3 id="codespaces"><a class="markdownIt-Anchor" href="#codespaces"></a> Codespaces</h3>
<p>嗯？Visual Studio Codespaces 跟这个 <a target="_blank" rel="noopener" href="https://github.com/features/codespaces" title="主页">Codespaces</a> 有什么关系？</p>
<p>没有直接关系，这是 GitHub 推出的服务，而不是微软的，尽管 GitHub 现已被微软收购。实际上如果没改名，可能就不那么容易搞混 <s>也许就是为这事儿改名的（逃</s></p>
<p><video width="650px" height="451px" loop autoplay playsinline muted type="video/mp4; codecs=avc1.4D401E,mp4a.40.2" src="https://github.githubassets.com/images/modules/site/codespaces/hero.h264.mp4"></video></p>
<p>从来自官网的动图看，这项服务可以在浏览 GitHub 仓库时一键进入该项目的工作目录，开始修改或阅读代码。</p>
<blockquote>
<p>How is Codespaces different from VS Code?<br />
Codespaces sets up a cloud-hosted, containerized, and customizable VS Code environment. After set up, you can connect to a codespace through the browser or through VS Code.</p>
</blockquote>
<p>VS Codespaces 是将 VSCode 作为一个前端，这个功能网页也可以替代，其重点是后端的 Azure 云开发环境；而 GitHub Codespaces 是将 GitHub 网页作为唯一前端（Get the full Visual Studio Code experience without leaving GitHub.），其重点在 Web 页面，不离开 GitHub 网页就可以获得 VSCode 的开发体验。</p>
<h2 id="vs-code"><a class="markdownIt-Anchor" href="#vs-code"></a> VS Code</h2>
<p><s>终于开始点题了</s></p>
<h3 id="杰出特性"><a class="markdownIt-Anchor" href="#杰出特性"></a> 杰出特性</h3>
<p>微软集结了杰出工程师，汇聚全球开发者的智慧。其团队负责人 <em>Erich Gamma</em>，是：</p>
<ul>
<li>JUnit 作者之一</li>
<li>《设计模式》作者之一</li>
<li>Eclipse 架构师</li>
</ul>
<p>2011 加入微软，在瑞士苏黎世组建团队开发基于 Web 技术的编辑器，也就是后来的 <a target="_blank" rel="noopener" href="https://microsoft.github.io/monaco-editor/" title="主页"><em>Monaco Editor</em></a>。VSCode 开发团队早期成员 10 来个人，但大多有 Eclipse 开发团队的背景。<a target="_blank" rel="noopener" href="https://github.com/microsoft/monaco-editor" title="GitHub">Monaco Editor</a> 是基于 Web 的编辑器，从 VSCode 脱离出来，成为一个独立的项目。</p>
<p>VSCode 在短短几年内，超越了 Atom、Sublime Text、Vim，成为最受欢迎的代码编辑器。同时，其架构设计和开发理念将代码编辑器提升到一个新的高度，我认为称之「神话」并不为过（<a href="#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB">推荐阅读</a>-3）。不得不说巨硬还是强，但凡用心。<s>改名部和大刀部笑了。不把一手好牌打烂就不叫微软（逃</s></p>
<p><img src="https://pic4.zhimg.com/v2-f06d2184194415c4581b872e68674408_r.jpg" alt="#b# 图片来自知乎" /><br />
<img src="https://pic4.zhimg.com/v2-1a79eba389c1a66908c6b0262cdfe0bb_r.jpg" alt="#b# 图片来自知乎" /></p>
<p>目前 VSCode 已统治了前端开发，几乎所有前端开发者都在使用。产品本身好用是一回事，另一个原因是 VSCode 本身就是由前端技术栈打造，对 JS/TS 的支持度较高，除此之外还有更重要的一点就是前端技术纷繁芜杂，变化多端，五六年之间，从刀耕火种，完成了工程化，在大前端时代，很难找到一款适合每个团队的 IDE，相比之下，选择重要组件，辅以不同的配置项来搭建开发环境更为便捷。</p>
<p><img src="https://pic2.zhimg.com/v2-623a63be2fde7b549a3c471d48fc585b_r.jpg" alt="Erich Gamma 在 2017 SpringOne Platform 上分享对于 VSCode 的定位 - 来自知乎" /></p>
<h4 id="lsp"><a class="markdownIt-Anchor" href="#lsp"></a> LSP</h4>
<blockquote>
<p>Language Server Protocol</p>
</blockquote>
<p>用于语法提示，是 VSCode 的一大创举，传统语法提示基于语法结构，将代码转换成抽象语法树（AST，Abstract Syntax Tree）再解析，而 LSP 不再关注 AST 和 Parser，转而关注 Document 和 Position，从而实现语言无关。</p>
<p>将语言提示变成 CS 架构，核心抽象成当点击了文档的第几行第几列位置需要 Server 作出什么响应的一个简单模型，基于 JSON RPC 协议传输，每个语言都可以基于协议实现通用后端。</p>
<p><img src="https://code.visualstudio.com/assets/api/language-extensions/language-server-extension-guide/lsp-illustration.png" alt="#b# LSP" /></p>
<h4 id="dap"><a class="markdownIt-Anchor" href="#dap"></a> DAP</h4>
<blockquote>
<p>Debug Adaptor Protocol</p>
</blockquote>
<p>VSCode 的另一大创举，实现了一个基于抽象协议、通用的、语言无关的调试协议。该协议用于和调试器后端通信，但调试器没有实现该协议，因此需要一个中介（adaptor）来适配，该中介称为 <em>Debugger Adaptor</em>（DA），通常是一个独立进程。</p>
<p><img src="https://code.visualstudio.com/assets/api/extension-guides/debugger-extension/debug-arch1.png" alt="#b# DAP 架构示意 - 来自官方文档" /></p>
<p>这两大设计属于高屋建瓴，可以看出开发团队的思想层次，把自己的东西做成标准，做出生态，开放共赢。连 Vim 也开始兼容这些协议。</p>
<p>在其他方面，VSCode 的表现同样可圈可点，比如全文查找替换和全目录查找替换，且支持正则匹配，甚至做到毫秒级响应。</p>
<p><img src="https://code.visualstudio.com/assets/docs/getstarted/userinterface/hero.png" alt="#b# VSCode 界面组成" /></p>
<p>下面简单讨论几个常用功能点。<a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/">官方文档</a> 有详细且权威的资料，更多信息请移步。</p>
<h3 id="工作区"><a class="markdownIt-Anchor" href="#工作区"></a> 工作区</h3>
<p>工作区由一个个标签组成，通常打开的是文本文件，但打开格式流行的图片也是可以的。</p>
<p><img src="https://code.visualstudio.com/assets/api/extension-guides/webview/basics-drag.gif" alt="#b# 来自 VSCode 文档" /></p>
<h3 id="设置"><a class="markdownIt-Anchor" href="#设置"></a> 设置</h3>
<p>VSCode 提供了两种设置方式：GUI 和配置文件。在之前也跟 ST 和 Atom 一样都是编辑配置文件，现在 Atom 和 VSCode 都引入了图形化的配置方式。</p>
<p><img src="https://code.visualstudio.com/assets/docs/getstarted/settings/settings.png" alt="#b# VSCode 设置 GUI" /></p>
<p>每个插件都可以有自己的配置项，在不明确配置项或者读完文档之前，难以下手进行配置，通过图形界面可以展示每个项目。通过复选框、下拉列表和输入框，完成了大多数配置要求。</p>
<ul>
<li>鼠标掠过配置项左侧，将浮现一个齿轮 ⚙，点击可复制该项到 JSON 文件。</li>
<li>单击标签栏右上角「打开设置」的图标，即可打开 <code>settings.json</code> 配置文件。</li>
</ul>
<h3 id="插件系统"><a class="markdownIt-Anchor" href="#插件系统"></a> 插件系统</h3>
<p>这也是其他编辑器共有的特性，没有插件，就变成了记事本和 VS（要么过弱要么过强）。但不同于 ST 和 Vim，VSCode 是开箱即用的，下载安装就能上手简单的开发，这实际上是由内置插件实现的，VSCode 内部功能也是插件化独立的。（VSCode 将模块化做到极致，甚至连图标都整合一套并开源了。）</p>
<p>官方为几种语言提供了插件和开发包，可直接安装使用（当然要在准备好开发依赖的前提下）。</p>
<p><img src="https://code.visualstudio.com/assets/docs/editor/extension-gallery/extensions-view-icon.png" alt="#b# Activity Bar 上的「扩展」图标 - 图片来自官方文档" /></p>
<p>点击左侧的扩展图标，搜索栏自动获得焦点，在此可以检索相关插件，点击可查看插件详情，打开为一个不可编辑标签。</p>
<p><img src="https://code.visualstudio.com/assets/docs/editor/extension-gallery/extensions-popular.png" alt="#b# 搜索查看插件 - 图片来自官方文档" /></p>
<p>如下图，Go 语言的插件由 Microsoft 开发，这些主流语言的插件都由官方提供并维护。</p>
<p><img src="https://code.visualstudio.com/assets/docs/editor/extension-gallery/extension-contributions.png" alt="#b# 点击查看插件详情 - 图片来自官方文档" /></p>
<h3 id="快捷键"><a class="markdownIt-Anchor" href="#快捷键"></a> 快捷键</h3>
<p>高效的工作流离不开快捷键的加持。VSCode 支持自定义快捷键，结合插件，可以引入 ST、Atom、VS 等编辑器的快捷键方案，同样这些插件也由官方提供。</p>
<p><img src="https://code.visualstudio.com/assets/docs/getstarted/keybinding/keyboard-shortcuts.gif" alt="#b# 快捷键编辑" /></p>
<p>以下为三大平台上默认快捷键映射表：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-windows.pdf" title="PDF">Windows</a></li>
<li><a target="_blank" rel="noopener" href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-macos.pdf" title="PDF">macOS</a></li>
<li><a target="_blank" rel="noopener" href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-linux.pdf" title="PDF">Linux</a></li>
</ul>
<h3 id="集成终端"><a class="markdownIt-Anchor" href="#集成终端"></a> 集成终端</h3>
<p>VSCode 集成了终端，默认按 <kbd>Ctrl</kbd> + <kbd>`</kbd> 切换，可以开启多个会话。类似 VS，VSCode 将问题、输出和终端分开，又引入了调试控制台，使得调试过程中能够交互式（REPL，Read-Eval-Print Loop）查看变量，执行相关语句。</p>
<p><img src="https://code.visualstudio.com/assets/docs/editor/debugging/debugconsole.png" alt="#b# 调试控制台 - 图片来自官方文档" /></p>
<h3 id="命令面板"><a class="markdownIt-Anchor" href="#命令面板"></a> 命令面板</h3>
<p><kbd>Shift</kbd> + <kbd>Alt</kbd> + <kbd>F</kbd> 可唤出命令面板，在此可输入并执行一些命令，快捷键的本质也就是绑定这些命令。</p>
<ul>
<li>以 <code>&gt;</code> 为提示符是执行命令：<kbd>Cmd</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd>，Windows 下为 <kbd>Ctrl</kbd></li>
<li>以 <code>:</code> 为提示符是跳转到当前文件某行：<kbd>Ctrl</kbd> + <kbd>G</kbd></li>
<li>以 <code>@</code> 为提示符是跳转到当前文件的某个结构：<kbd>Cmd</kbd> + <kbd>Shift </kbd> + <kbd>O</kbd>，Windows 下为 <kbd>Ctrl</kbd></li>
<li>没有提示符是打开当前工作目录的文件：<kbd>Cmd</kbd> + <kbd>P</kbd>，Windows 下为 <kbd>Ctrl</kbd></li>
</ul>
<p>以上功能仅仅是 VSCode 强大功能的冰山一角，</p>
<p>每年，开发团队会发布一个 Roadmap，表示接下来一年要做的工作，每个月 VSCode 都会发布一个新版本，每次更新都会打开一份发行声明（「帮助-发行声明」也可以查看），详细描述更新的新功能和预览版功能（已经做完的和做好了的），每次通读都会感叹 VSCode 实在是太强大了。如果能读完每一篇发行声明，那必定会对这款软件产生更深刻的理解，可惜我目前做不到-_-。</p>
<p>多翻翻文档和设置，每次指定会有新收获。比如「Developer: Toggle Screencast Mode」命令，启用后每次按键、每次点击都会在窗口内标识，用于截图和录屏演示的场景。</p>
<p><img src="https://code.visualstudio.com/assets/updates/1_31/screencast.gif" alt="#b# Screencast 模式，2019.1 发行说明  - 图片来自官方文档" /></p>
<h2 id="后记"><a class="markdownIt-Anchor" href="#后记"></a> 后记</h2>
<p>肝了两天，这篇难产的文章终于告一段落了，行文至此，应该可以摆脱内容太浅的问题了，起码足够广。<s>虽然也很水。</s></p>
<h2 id="推荐阅读"><a class="markdownIt-Anchor" href="#推荐阅读"></a> 推荐阅读</h2>
<ol>
<li><a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs">Visual Studio Code 官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/xtlisk/article/details/39099199">AOT和JIT - CSDN</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/38355661/answer/76067276">编译器是如何编译自己的？ - RednaxelaFX的回答</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/96041706">从 VSCode 看大型 IDE 技术架构 - paranoidjk的文章</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/363365943">Visual Studio Code 可以翻盘成功主要是因为什么？ - 知乎</a></li>
</ol>
<h2 id="参考文章"><a class="markdownIt-Anchor" href="#参考文章"></a> 参考文章</h2>
<ol>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/90094288">重磅！微软发布 Visual Studio Online：Web 版 VS Code + 云开发环境</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/64505333">VS Code Remote 发布！开启远程开发新时代</a></li>
</ol>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Palm Civet</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://palmcivet.github.io/2020/03/qian-tan-vscode-he-kai-fa-gong-ju/">https://palmcivet.github.io/2020/03/qian-tan-vscode-he-kai-fa-gong-ju/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Palm Civet</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E5%8F%82%E8%80%83/">
                                    <span class="chip bg-color">参考</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/meta/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/meta/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/03/huo-qu-gitbook-zhan-dian-de-wen-dang/">
                    <div class="card-image">
                        
                        <img src="https://s1.ax1x.com/2020/03/13/8KIQ6U.png" class="responsive-img" alt="获取 GitBook 站点的文档">
                        
                        <span class="card-title">获取 GitBook 站点的文档</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            wget 加 -m 选项下载站点资源，然后使用 Python 提供的 SimpleHTTPServer 搭建简易服务器，可以实现在本地访问文档。
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-03-13
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Geek/" class="post-category">
                                    Geek
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Python/">
                        <span class="chip bg-color">Python</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/02/github-yu-spa-bu-shu/">
                    <div class="card-image">
                        
                        <img src="https://s2.ax1x.com/2020/02/04/1DDiEF.png" class="responsive-img" alt="GitHub 与 SPA 部署">
                        
                        <span class="card-title">GitHub 与 SPA 部署</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            最近部署 SPA 时遇到了一些问题，即刷新页面会返回 404，设置服务器的 404 页面可以解决。基于静态页面托管的原理，可以将 SPA 发布在 GitHub Pages 上，并借助 Actions 实现持续部署（CD）。
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-02-03
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E8%BF%90%E7%BB%B4/" class="post-category">
                                    运维
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/GitHub/">
                        <span class="chip bg-color">GitHub</span>
                    </a>
                    
                    <a href="/tags/React/">
                        <span class="chip bg-color">React</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: Palm Civet<br />'
            + '文章作者: Palm Civet<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('6'),
            headingSelector: 'h1, h2, h3, h4, h5, h6'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4, h5, h6').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2021</span>
            
            <a href="/about" target="_blank">Palm Civet</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/palmcivet" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:palmcivet_email@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2143899558" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2143899558" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    
    
    <script type="text/javascript" size="150" alpha='0.6'
        zIndex="-1" src="/libs/background/ribbon-refresh.min.js" async="async"></script>
    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
